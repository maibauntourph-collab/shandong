import{r as t,j as s}from"./index-D-sX74-q.js";import{a as g}from"./api-tZUecBdR.js";const y=()=>{const[c,h]=t.useState([]),[o,m]=t.useState(!0),[a,n]=t.useState(1),[i,x]=t.useState(1),[l,j]=t.useState("");t.useEffect(()=>{d()},[a]);const d=async()=>{try{const e=new URLSearchParams({page:String(a),limit:"20",search:l}),r=await(await g.get(`/api/admin/customers?${e}`)).json();r.success&&(h(r.data),x(r.pagination.totalPages))}catch(e){console.error("Fetch error:",e)}finally{m(!1)}},p=e=>new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"}),u=e=>{e.preventDefault(),n(1),d()};return s.jsxs("div",{className:"admin-customers",children:[s.jsxs("div",{className:"admin-page-header",children:[s.jsx("h1",{className:"admin-page-title",children:"고객 관리"}),s.jsx("p",{className:"admin-page-subtitle",children:"문의 이력이 있는 고객 목록입니다"})]}),s.jsxs("form",{className:"search-form",onSubmit:u,children:[s.jsx("input",{type:"text",placeholder:"이름, 이메일, 연락처 검색",value:l,onChange:e=>j(e.target.value),className:"search-input"}),s.jsx("button",{type:"submit",className:"btn btn-primary",children:"검색"})]}),s.jsx("div",{className:"admin-card",children:o?s.jsx("div",{className:"loading",children:"로딩 중..."}):c.length===0?s.jsx("div",{className:"empty-state",children:s.jsx("p",{children:"등록된 고객이 없습니다."})}):s.jsxs(s.Fragment,{children:[s.jsxs("table",{className:"admin-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"고객명"}),s.jsx("th",{children:"이메일"}),s.jsx("th",{children:"연락처"}),s.jsx("th",{children:"총 문의"}),s.jsx("th",{children:"최근 문의"}),s.jsx("th",{children:"상태"})]})}),s.jsx("tbody",{children:c.map(e=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsxs("div",{className:"customer-name",children:[s.jsx("span",{className:"avatar",children:e.name.charAt(0)}),e.name]})}),s.jsx("td",{children:e.email}),s.jsx("td",{children:e.phone}),s.jsx("td",{children:s.jsxs("span",{className:"inquiry-count",children:[e.totalInquiries,"건"]})}),s.jsx("td",{children:p(e.lastInquiry)}),s.jsx("td",{children:e.hasConfirmed?s.jsx("span",{className:"status-badge confirmed",children:"예약확정"}):s.jsx("span",{className:"status-badge pending",children:"문의중"})})]},e.email))})]}),i>1&&s.jsxs("div",{className:"pagination",children:[s.jsx("button",{className:"page-btn",disabled:a===1,onClick:()=>n(a-1),children:"← 이전"}),s.jsxs("span",{className:"page-info",children:[a," / ",i]}),s.jsx("button",{className:"page-btn",disabled:a===i,onClick:()=>n(a+1),children:"다음 →"})]})]})})]})};export{y as default};
