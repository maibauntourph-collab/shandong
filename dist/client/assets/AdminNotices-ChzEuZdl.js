import{r as n,j as e}from"./index-D-sX74-q.js";import{a as c}from"./api-tZUecBdR.js";const k=()=>{const[l,u]=n.useState([]),[p,x]=n.useState(!0),[j,d]=n.useState(!1),[t,a]=n.useState({});n.useEffect(()=>{r()},[]);const r=async()=>{try{const i=await(await c.get("/api/admin/notices")).json();i.success&&u(i.data)}catch(s){console.error("Fetch error:",s)}finally{x(!1)}},N=async s=>{s.preventDefault();try{const i=t._id?`/api/admin/notices/${t._id}`:"/api/admin/notices",m={title:t.title,content:t.content,isPublished:t.isPublished??!0};(t._id?await c.put(i,m):await c.post(i,m)).ok&&(r(),o())}catch(i){console.error("Save error:",i)}},b=async s=>{if(confirm("ì´ ê³µì§€ì‚¬í•­ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{(await c.delete(`/api/admin/notices/${s}`)).ok&&r()}catch(i){console.error("Delete error:",i)}},h=s=>{a(s||{title:"",content:"",isPublished:!0}),d(!0)},o=()=>{a({}),d(!1)},g=s=>new Date(s).toLocaleDateString("ko-KR",{year:"numeric",month:"short",day:"numeric"});return e.jsxs("div",{className:"admin-notices",children:[e.jsxs("div",{className:"admin-page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"admin-page-title",children:"ê²Œì‹œíŒ ê´€ë¦¬"}),e.jsx("p",{className:"admin-page-subtitle",children:"ê³µì§€ì‚¬í•­ ë° ê²Œì‹œê¸€ì„ ê´€ë¦¬í•©ë‹ˆë‹¤"})]}),e.jsx("button",{className:"btn btn-primary",onClick:()=>h(),children:"+ ìƒˆ ê³µì§€ ì‘ì„±"})]}),j&&e.jsx("div",{className:"modal-overlay",onClick:o,children:e.jsxs("div",{className:"modal-content",onClick:s=>s.stopPropagation(),children:[e.jsx("h3",{children:t._id?"ê³µì§€ ìˆ˜ì •":"ìƒˆ ê³µì§€ ì‘ì„±"}),e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ì œëª©"}),e.jsx("input",{type:"text",value:t.title||"",onChange:s=>a({...t,title:s.target.value}),placeholder:"ê³µì§€ ì œëª©",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"ë‚´ìš©"}),e.jsx("textarea",{value:t.content||"",onChange:s=>a({...t,content:s.target.value}),placeholder:"ê³µì§€ ë‚´ìš©",rows:8,required:!0})]}),e.jsx("div",{className:"form-group checkbox",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:t.isPublished??!0,onChange:s=>a({...t,isPublished:s.target.checked})}),"ê³µê°œ"]})}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{type:"button",className:"btn",onClick:o,children:"ì·¨ì†Œ"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"ì €ì¥"})]})]})]})}),e.jsx("div",{className:"admin-card",children:p?e.jsx("div",{className:"loading",children:"ë¡œë”© ì¤‘..."}):l.length===0?e.jsx("div",{className:"empty-state",children:e.jsx("p",{children:"ë“±ë¡ëœ ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤."})}):e.jsx("div",{className:"notice-list",children:l.map(s=>e.jsxs("div",{className:"notice-item",children:[e.jsxs("div",{className:"notice-info",children:[e.jsxs("div",{className:"notice-header",children:[e.jsx("h4",{children:s.title}),!s.isPublished&&e.jsx("span",{className:"draft-badge",children:"ë¹„ê³µê°œ"})]}),e.jsxs("p",{className:"notice-preview",children:[s.content.slice(0,100),s.content.length>100&&"..."]}),e.jsx("span",{className:"notice-date",children:g(s.createdAt)})]}),e.jsxs("div",{className:"notice-actions",children:[e.jsx("button",{className:"action-btn",onClick:()=>h(s),children:"âœï¸"}),e.jsx("button",{className:"action-btn delete",onClick:()=>b(s._id),children:"ğŸ—‘ï¸"})]})]},s._id))})})]})};export{k as default};
